<!-- header.html (SPASAM.MSE â€“ OFFICIAL FINAL)
     - Single-row navbar (scrolls horizontally if needed; never wraps into 2 rows)
     - Projects points to docs/projects.html (NOT repo /R)
     - Vignettes points to docs/vignettes.html (or your chosen landing page)
     - Icons are loaded ONLINE from GitHub raw URLs (matches build_docs_site.R)
     - Copy buttons for code blocks
-->

<style>
  :root{
    --bg:#0b1220; --bg2:#0f1b33; --text:#e9eefc; --muted:#b7c3e6;
    --line:rgba(255,255,255,.10); --accent:#6ea8ff; --accent2:#7ef0d4;
    --shadow:0 10px 30px rgba(0,0,0,.35); --radius:18px;
  }

  html, body{ margin:0 !important; padding:0 !important; }

  body{
    font-family: ui-sans-serif,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--text);
    line-height:1.6;
    background:
      radial-gradient(1000px 600px at 20% -10%, rgba(110,168,255,.25), transparent 60%),
      radial-gradient(800px 600px at 90% 10%, rgba(126,240,212,.18), transparent 55%),
      linear-gradient(180deg,var(--bg),var(--bg2)) !important;
  }

  /* kill bootstrap/rmarkdown reserved padding + avoid white blocks */
  body[style*="padding-top"]{ padding-top:0 !important; }
  .main-container,
  .container-fluid.main-container,
  .toc-content,
  .content{
    padding-top:0 !important;
    margin-top:0 !important;
    background:transparent !important;
  }

  /* IMPORTANT: prevent bootstrap inner wrappers from turning the page white */
  .container, .container-fluid, .page-inner, .row,
  .col-xs-12, .col-sm-12, .col-md-12, .col-md-9, .col-md-3,
  .section, .well, .panel, .panel-body{
    background: transparent !important;
  }

  a{ color:var(--accent) !important; text-decoration:none; }
  a:hover{ text-decoration:underline; }
  h1,h2,h3,h4,h5,h6{ color:var(--text) !important; }
  p,li{ color:rgba(233,238,252,.92) !important; }

  /* hide default rmarkdown/bootstrap navbar */
  .navbar, nav.navbar, .navbar-default, .navbar-inverse,
  .navbar-fixed-top, .navbar-static-top, #navbar{
    display:none !important;
  }

  /* Code blocks + copy button */
  pre{
    position:relative;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.10);
    background:rgba(255,255,255,.04);
    box-shadow:var(--shadow);
    padding:14px;
    overflow:auto;
  }
  pre code{
    font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
    font-size:12px;
    color:var(--text) !important;
    background:transparent !important;
  }
  .copy-btn{
    position:absolute; top:10px; right:12px;
    padding:6px 10px; font-size:12px; cursor:pointer;
    border-radius:999px; color:var(--text);
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
  }
  .copy-btn:hover{ background:rgba(255,255,255,.10); }

  /* ==========================
     NAVBAR (one row, no wrap)
     ========================== */
  .spasam-nav{
    position:sticky;
    top:0;
    z-index:999999;
    backdrop-filter:blur(10px);
    background:rgba(11,18,32,.65);
    border-bottom:1px solid var(--line);
  }
  .spasam-nav-inner{
    max-width:1100px;
    margin:0 auto;
    padding:10px 18px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    flex-wrap:nowrap;
  }
  .brand{
    display:flex; align-items:center; gap:10px;
    font-weight:800; letter-spacing:.3px;
    color:var(--text); flex:0 0 auto;
  }
  .brand .dot{
    width:10px; height:10px; border-radius:999px;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    box-shadow:0 0 0 4px rgba(110,168,255,.15);
  }
  .spasam-links{
    display:flex; align-items:center; gap:8px;
    flex-wrap:nowrap;
    white-space:nowrap;
    overflow-x:auto;
    overflow-y:hidden;
    -webkit-overflow-scrolling:touch;
    justify-content:flex-end;
    flex:1 1 auto;
  }
  .spasam-links::-webkit-scrollbar{ height:6px; }
  .spasam-links::-webkit-scrollbar-thumb{
    background:rgba(255,255,255,.12);
    border-radius:999px;
  }
  .spasam-links a{
    display:inline-flex; align-items:center; gap:8px;
    padding:10px 12px;
    border-radius:999px;
    color:var(--text) !important;
    border:1px solid rgba(255,255,255,.08);
    background:rgba(255,255,255,.04);
    font-size:14px;
    text-decoration:none;
    flex:0 0 auto;
  }
  .spasam-links a:hover{
    background:rgba(255,255,255,.08);
    text-decoration:none;
  }
  .spasam-icon{
    width:18px; height:18px; object-fit:contain;
  }

  /* TOC / sidebar dark */
  .tocify, .tocify-wrapper, #TOC{
    background:rgba(15,26,47,.95) !important;
    border:1px solid rgba(255,255,255,.10) !important;
    box-shadow:var(--shadow) !important;
    max-height:calc(100vh - 90px) !important;
  }
  .tocify .list-group-item,
  .tocify-wrapper .list-group-item,
  #TOC .list-group-item{
    background:transparent !important;
    color:var(--text) !important;
    border-color:rgba(255,255,255,.10) !important;
  }
  .tocify .list-group-item.active,
  .tocify-wrapper .list-group-item.active,
  #TOC .list-group-item.active{
    background:rgba(110,168,255,.18) !important;
    border-radius:10px !important;
  }
  .tocify a, .tocify-wrapper a, #TOC a{ color:var(--text) !important; }
</style>

<script>
document.addEventListener("DOMContentLoaded", function(){

  // add copy buttons
  document.querySelectorAll("pre code").forEach(function(block){
    var btn = document.createElement("button");
    btn.className = "copy-btn";
    btn.type = "button";
    btn.textContent = "Copy";
    btn.onclick = function(){
      navigator.clipboard.writeText(block.innerText).then(function(){
        btn.textContent = "Copied!";
        setTimeout(function(){ btn.textContent = "Copy"; }, 1500);
      }).catch(function(){
        btn.textContent = "Error";
        setTimeout(function(){ btn.textContent = "Copy"; }, 1500);
      });
    };
    block.parentNode.appendChild(btn);
  });

  // safety: remove duplicate navbars if any
  var navs = document.querySelectorAll(".spasam-nav");
  if(navs.length > 1){
    for(var i=1;i<navs.length;i++) navs[i].remove();
  }

});
</script>

<!-- NAVBAR -->
<nav class="spasam-nav">
  <div class="spasam-nav-inner">

    <div class="brand">
      <span class="dot"></span>
      <span>SPASAM.MSE</span>
    </div>

    <div class="spasam-links">

      <!-- IMPORTANT: these are docs-root relative links (because build flattens html into docs/) -->
      <a href="index.html">
        <img class="spasam-icon" src="https://raw.githubusercontent.com/lichengxue/SPASAM.MSE/main/docs/icons/home_icon.png" alt="Home">Home
      </a>

      <!-- If you have a specific vignette landing page, change vignettes.html to that file -->
      <a href="vignettes.html">
        <img class="spasam-icon" src="https://raw.githubusercontent.com/lichengxue/SPASAM.MSE/main/docs/icons/vignettes_icon.png" alt="Vignettes">Vignettes
      </a>

      <!-- SOURCE before PROJECTS -->
      <a href="https://github.com/lichengxue/SPASAM.MSE">
        <img class="spasam-icon" src="https://raw.githubusercontent.com/lichengxue/SPASAM.MSE/main/docs/icons/source_icon.png" alt="Source">Source
      </a>

      <!-- Projects should point to the rendered projects page, NOT the repo /R folder -->
      <a href="projects.html">
        <img class="spasam-icon" src="https://raw.githubusercontent.com/lichengxue/SPASAM.MSE/main/docs/icons/projects_icon.png" alt="Projects">Projects
      </a>

      <!-- If your news page is named differently, update it here -->
      <a href="news_updates.html">
        <img class="spasam-icon" src="https://raw.githubusercontent.com/lichengxue/SPASAM.MSE/main/docs/icons/news_icon.png" alt="News">News
      </a>

      <a href="bug_report.html">
        <img class="spasam-icon" src="https://raw.githubusercontent.com/lichengxue/SPASAM.MSE/main/docs/icons/bug_report_icon.png" alt="Bug report">Bug report
      </a>

      <a href="mailto:chengxue.li@noaa.gov">
        <img class="spasam-icon" src="https://raw.githubusercontent.com/lichengxue/SPASAM.MSE/main/docs/icons/contact_icon.png" alt="Contact">Contact
      </a>

    </div>

  </div>
</nav>
